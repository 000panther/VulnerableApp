function addingEventListenerToFetchTokenButton() {
  document
    .getElementById("fetchTokenButton")
    .addEventListener("click", function() {
      //doGetAjaxCallForVulnerabilityLevel(fetchTokenCallBack, true);

      let url = getUrlForVulnerabilityLevel();
      url = url + "?fetch=true";
      doGetAjaxCall(fetchTokenCallBack, url, true);
    });
}
addingEventListenerToFetchTokenButton();

function addingEventListenerToVerifyToken() {
  document.getElementById("verifyToken").addEventListener("click", function() {
    let url = getUrlForVulnerabilityLevel();
    doGetAjaxCall(updateUIWithVerifyResponse, url, true);
  });
}
addingEventListenerToVerifyToken();

function updateUIWithVerifyResponse(data) {
  if (data.isValid) {
    document.getElementById("verificationResponse").innerHTML =
      "JWT token is valid";
  } else {
    document.getElementById("verificationResponse").innerHTML =
      "JWT Token: " + data.JWTToken + " is not valid. Please try again";
  }
}

function fetchTokenCallBack(data) {
  document.getElementById("jwtToken").innerHTML = data.JWTToken;
  document.getElementById("description").style.visibility = "visible";
}
